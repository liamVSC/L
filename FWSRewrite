local plr = game.Players.LocalPlayer
local customModules = {}

customModules.bypassAntiCheat = function()
    plr.Character.Humanoid.WalkSpeed = 100
    local old; old = hookmetamethod(game, "__namecall", function(self, ...) 
        if self == plr and getnamecallmethod() == "Kick" and not checkcaller() then 
            plr.Character.Humanoid.WalkSpeed = 16
            return task.wait(99e99)
        end
        return old(self, ...)
    end)
end

coroutine.wrap(function() 
    pcall(function() 
        if getconnections then 
            repeat
                for i,v in pairs(getconnections(game:GetService("ScriptContext").Error)) do
                    v:Disable()
                end
                task.wait(5)
            until false == true
        end
    end)
end)()

customModules.bypassAntiCheat()

customModules.getZones = function()
    local zones = {}
    for i,v in next, workspace.GameObjects.Areas:children() do
        table.insert(zones,v.Name)
    end
    return zones
end

customModules.loadAllZones = function()
    for i,v in next, game:GetService("ReplicatedStorage").Chunks:children() do
        if v:FindFirstChild("Items") then
            v.Items.Parent = workspace.GameObjects.Areas[v.Name]
        end
    end
end

customModules.getZonesItems = function(zone)
    if not workspace.GameObjects.Areas[zone] then return warn("Invalid Zone") end
    if not workspace.GameObjects.Areas[zone].Items then return warn("No Items Loaded") end
    local items = {"All"}
    for i,v in pairs(game.Workspace.GameObjects.Areas[zone].Items:GetChildren()) do
        local name = v.Name:gsub('%d+','');
        if not table.find(items, name) then
            table.insert(items, name);
        end
    end
    print("here")
    return items
end

customModules.getEggs = function()
    local eggs = {}
    for i,v in next, workspace.GameObjects.Eggs:children() do
        table.insert(eggs,v.Name)
    end
    return eggs
end

customModules.getNearestItem = function(zone,select)
    if select == "All" or select == nil then select = "" end
    if not workspace.GameObjects.Areas[zone] then return end
    local item
    local nearestDist = math.huge;
    for i,v in next, workspace.GameObjects.Areas:FindFirstChild(zone).Items:GetChildren() do
        local dist = (v.PrimaryPart.Position - plr.Character.HumanoidRootPart.Position).magnitude
        if dist < nearestDist and v.Name:match(select) then
            item = v; nearestDist = dist;
        end
    end
    return item
end

local zone
local itemSelected
local autoFarmBool
local network = require(game.ReplicatedStorage.Modules.Network)

customModules.autoFarm = function()
    task.spawn(function()
        customModules.bypassAntiCheat()
        repeat task.wait()
            if zone == nil then continue end
            local nearestItem = customModules.getNearestItem(zone,itemSelected)
            if nearestItem then
                plr.Character:PivotTo(nearestItem:GetPivot())
                network:FireServer("Hit",nearestItem)
            end
        until not autoFarmBool
    end)
end

local autoOrbsBool

customModules.autoOrbs = function()
    game.Workspace.Orbs.ChildAdded:connect(function(C)
        network:FireServer("CollectOrb", C.Name);
        C:Destroy()
    end)
    task.spawn(function()
        while autoOrbsBool and task.wait() do
            for i,v in pairs(game.Workspace.Orbs:GetChildren()) do
                network:FireServer("CollectOrb", v.Name);
                v:Destroy();
            end
        end
    end)
end

local Mercury = loadstring(game:HttpGet("https://raw.githubusercontent.com/liamVSC/L/ui/mercury"))()
local GUI = Mercury:Create{
    Name = "Firework Simulator",
    --Size = UDim2.fromOffset(600, 400),
    Theme = Mercury.Themes.Dark,
    Link = "Firework Simulator"
}
local localTab = GUI:Tab{
	Name = "player",
	Icon = "rbxassetid://6023426915"
}
local Farming = GUI:Tab{
	Name = "automation",
	Icon = "rbxassetid://6023426921"
}
-- local pets = GUI:Tab{
--     Name = "pets/eggs",
--     Icon = "rbxassetid://6031260782"
-- }

local itemDropdown

Farming:Dropdown{
	Name = "Zone Dropdown",
	StartingText = "Select:",
	Description = "Select the zone you want to farm",
	Items = customModules.getZones(),
	Callback = function(item)
        customModules.loadAllZones()
        itemDropdown:Clear()
        task.wait(0.25)
        itemDropdown:AddItems(customModules.getZonesItems(item))
        zone = item
    end
}

itemDropdown = Farming:Dropdown{
	Name = "Item Dropdown",
	StartingText = "Select:",
	Description = "Select the zone you want to farm",
	Items = customModules.getZonesItems("Spawn"),
	Callback = function(item)
        itemSelected = item
    end
}

Farming:Toggle{
	Name = "Auto Farm",
	StartingState = false,
	Description = nil,
	Callback = function(state)
        autoFarmBool = state
        customModules.autoFarm()
    end
}

Farming:Toggle{
	Name = "Auto Orbs",
	StartingState = false,
	Description = nil,
	Callback = function(state)
        autoOrbsBool = state
        customModules.autoOrbs()
    end
}



localTab:Slider{
	Name = "WalkSpeed",
	Default = 30,
	Min = 0,
	Max = 100,
	Callback = function(value)
        plr.Character.Humanoid.WalkSpeed = value
    end
}

GUI:Credit{
	Name = "liam",
	Description = "Script Creator",
	V3rm = "beAssed.com",
	Discord = "liam#3566"
}
